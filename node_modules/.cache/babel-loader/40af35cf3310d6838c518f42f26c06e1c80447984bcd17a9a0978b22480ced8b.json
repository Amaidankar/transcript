{"ast":null,"code":"import React,{useState,useEffect}from'react';import{googleLogout,useGoogleLogin}from'@react-oauth/google';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const GoogleLogin=()=>{const[user,setUser]=useState(()=>JSON.parse(sessionStorage.getItem('user'))||null);const[profile,setProfile]=useState(()=>JSON.parse(sessionStorage.getItem('profile'))||null);const[isLoggedIn,setIsLoggedIn]=useState(!!sessionStorage.getItem('user'));const login=useGoogleLogin({onSuccess:codeResponse=>{setUser(codeResponse);setIsLoggedIn(true);sessionStorage.setItem('user',JSON.stringify(codeResponse));},onError:error=>console.log('Login Failed:',error)});useEffect(()=>{if(user&&!profile){axios.get(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${user===null||user===void 0?void 0:user.access_token}`,{headers:{Authorization:`Bearer ${user===null||user===void 0?void 0:user.access_token}`,Accept:'application/json'}}).then(res=>{setProfile(res===null||res===void 0?void 0:res.data);sessionStorage.setItem('profile',JSON.stringify(res===null||res===void 0?void 0:res.data));}).catch(err=>console.log(err));}},[user,profile]);const handleLogout=()=>{googleLogout();setProfile(null);setUser(null);setIsLoggedIn(false);sessionStorage.removeItem('user');sessionStorage.removeItem('profile');};const handleGmailLogin=()=>{login();};return/*#__PURE__*/_jsx(_Fragment,{children:isLoggedIn&&profile?/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"me-2\",children:profile===null||profile===void 0?void 0:profile.name}),/*#__PURE__*/_jsx(\"img\",{src:profile===null||profile===void 0?void 0:profile.picture,alt:\"User\",className:\"rounded-circle me-2\",style:{width:'30px',height:'30px'}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-light\",onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-light loginBtn\",onClick:handleGmailLogin,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"currentColor\",style:{height:'1rem',width:'1rem'},children:/*#__PURE__*/_jsx(\"path\",{d:\"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28 5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934 8.907 8.907 0 0 0 8.934 8.934c4.467 0 8.529-3.249 8.529-8.934 0-.528-.081-1.097-.202-1.625z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"ms-2\",children:\"Login with Gmail\"})]})});};export default GoogleLogin;","map":{"version":3,"names":["React","useState","useEffect","googleLogout","useGoogleLogin","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GoogleLogin","user","setUser","JSON","parse","sessionStorage","getItem","profile","setProfile","isLoggedIn","setIsLoggedIn","login","onSuccess","codeResponse","setItem","stringify","onError","error","console","log","get","access_token","headers","Authorization","Accept","then","res","data","catch","err","handleLogout","removeItem","handleGmailLogin","children","className","name","src","picture","alt","style","width","height","onClick","xmlns","viewBox","fill","d"],"sources":["/home/ifas/Ashish/youtube-transcript-frontend/src/component/googleLogin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { googleLogout, useGoogleLogin } from '@react-oauth/google';\nimport axios from 'axios';\n\nconst GoogleLogin = () => {\n    const [user, setUser] = useState(() => JSON.parse(sessionStorage.getItem('user')) || null); \n    const [profile, setProfile] = useState(() => JSON.parse(sessionStorage.getItem('profile')) || null); \n    const [isLoggedIn, setIsLoggedIn] = useState(!!sessionStorage.getItem('user')); \n\n    const login = useGoogleLogin({\n        onSuccess: (codeResponse) => {\n            setUser(codeResponse);\n            setIsLoggedIn(true);\n            sessionStorage.setItem('user', JSON.stringify(codeResponse));\n        },\n        onError: (error) => console.log('Login Failed:', error)\n    });\n\n    useEffect(() => {\n        if (user && !profile) {\n            axios\n                .get(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${user?.access_token}`, {\n                    headers: {\n                        Authorization: `Bearer ${user?.access_token}`,\n                        Accept: 'application/json',\n                    },\n                })\n                .then((res) => {\n                    setProfile(res?.data);\n                    sessionStorage.setItem('profile', JSON.stringify(res?.data)); \n                })\n                .catch((err) => console.log(err));\n        }\n    }, [user, profile]);\n\n\n    const handleLogout = () => {\n        googleLogout();\n        setProfile(null);\n        setUser(null);\n        setIsLoggedIn(false);\n        sessionStorage.removeItem('user');\n        sessionStorage.removeItem('profile'); \n    };\n\n    const handleGmailLogin = () => {\n        login(); \n    };\n    \n    return (\n        <>\n            {isLoggedIn && profile ? (\n                <div className=\"d-flex align-items-center\">\n                    <span className=\"me-2\">{profile?.name}</span>\n                    <img\n                        src={profile?.picture}\n                        alt=\"User\"\n                        className=\"rounded-circle me-2\"\n                        style={{ width: '30px', height: '30px' }}\n                    />\n                    <button className=\"btn btn-sm btn-light\" onClick={handleLogout}>Logout</button>\n                </div>\n            ) : (\n                <button className=\"btn btn-sm btn-light loginBtn\" onClick={handleGmailLogin}>\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 24 24\"\n                        fill=\"currentColor\"\n                        style={{ height: '1rem', width: '1rem' }}\n                    >\n                        <path d=\"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28 5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934 8.907 8.907 0 0 0 8.934 8.934c4.467 0 8.529-3.249 8.529-8.934 0-.528-.081-1.097-.202-1.625z\" />\n                    </svg>\n                    <span className='ms-2'>Login with Gmail</span>\n                </button>\n            )}\n        </>\n    );\n};\n\nexport default GoogleLogin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}